<?php


/**
 * Returns a random string of the length
 */
function random_str($length, $keyspace = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ')
{
    $str = '';
    $max = mb_strlen($keyspace, '8bit') - 1;
    for ($i = 0; $i < $length; ++$i) {
        $str .= $keyspace[random_int(0, $max)];
    }
    return $str;
}

/**
 * Returns the string in between two strings
 */
function get_string_between($string, $start, $end){
    $string = ' ' . $string;
    $ini = strpos($string, $start);
    if ($ini == 0) return '';
    $ini += strlen($start);
    $len = strpos($string, $end, $ini) - $ini;

    return substr($string, $ini, $len);
}

/**
 * Returns valid IP address or catches invalid IP address
 */
function getIP(){
    $ip = filter_var($_SERVER['REMOTE_ADDR'], FILTER_VALIDATE_IP);

    if (!$ip){
        $ip = 'INVALID';
    } 

    return $ip;
}